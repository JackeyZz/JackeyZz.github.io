<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="java,spring,">





  <link rel="alternate" href="/atom.xml" title="JackeyZz的博客主页" type="application/atom+xml">






<meta name="description" content="ssh框架介绍与简单实例ssh框架简介springSpring是一个J2EE开发的强大框架，提供了管理业务对象的一致方法并且鼓励了注入对接口编程而不是对类编程的良好习惯。通俗点说，就是通过xml形式或者注解形式将类集合成一个个封装后的Bean，再由spring容器进行管理访问，实现类层模块的松散耦合。spring有两个主要的概念或者说设计思想，即为IoC(控制反转)和DI(依赖注入)。 IoC-I">
<meta name="keywords" content="java,spring">
<meta property="og:type" content="article">
<meta property="og:title" content="java_ssh框架(3)">
<meta property="og:url" content="http://yoursite.com/2018/03/10/java-ssh框架-3/index.html">
<meta property="og:site_name" content="JackeyZz的博客主页">
<meta property="og:description" content="ssh框架介绍与简单实例ssh框架简介springSpring是一个J2EE开发的强大框架，提供了管理业务对象的一致方法并且鼓励了注入对接口编程而不是对类编程的良好习惯。通俗点说，就是通过xml形式或者注解形式将类集合成一个个封装后的Bean，再由spring容器进行管理访问，实现类层模块的松散耦合。spring有两个主要的概念或者说设计思想，即为IoC(控制反转)和DI(依赖注入)。 IoC-I">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2018/03/10/java-ssh框架-3/pic1.png">
<meta property="og:image" content="http://yoursite.com/2018/03/10/java-ssh框架-3/pic2.png">
<meta property="og:image" content="http://yoursite.com/2018/03/10/java-ssh框架-3/pic3.png">
<meta property="og:image" content="http://yoursite.com/2018/03/10/java-ssh框架-3/pic4.png">
<meta property="og:image" content="http://yoursite.com/2018/03/10/java-ssh框架-3/pic5.png">
<meta property="og:image" content="http://yoursite.com/2018/03/10/java-ssh框架-3/pic9.png">
<meta property="og:image" content="http://yoursite.com/2018/03/10/java-ssh框架-3/pic6.png">
<meta property="og:image" content="http://yoursite.com/2018/03/10/java-ssh框架-3/pic7.png">
<meta property="og:image" content="http://yoursite.com/2018/03/10/java-ssh框架-3/pic8.png">
<meta property="og:updated_time" content="2018-09-22T07:36:53.120Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="java_ssh框架(3)">
<meta name="twitter:description" content="ssh框架介绍与简单实例ssh框架简介springSpring是一个J2EE开发的强大框架，提供了管理业务对象的一致方法并且鼓励了注入对接口编程而不是对类编程的良好习惯。通俗点说，就是通过xml形式或者注解形式将类集合成一个个封装后的Bean，再由spring容器进行管理访问，实现类层模块的松散耦合。spring有两个主要的概念或者说设计思想，即为IoC(控制反转)和DI(依赖注入)。 IoC-I">
<meta name="twitter:image" content="http://yoursite.com/2018/03/10/java-ssh框架-3/pic1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/03/10/java-ssh框架-3/">





  <title>java_ssh框架(3) | JackeyZz的博客主页</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  
  
  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">JackeyZz的博客主页</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br>
            
            日程表
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/10/java-ssh框架-3/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JackeyZz">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JackeyZz的博客主页">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">java_ssh框架(3)</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-10T00:04:27+08:00">
                2018-03-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/java整理总结/" itemprop="url" rel="index">
                    <span itemprop="name">java整理总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/03/10/java-ssh框架-3/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count gitment-comments-count" data-xid="/2018/03/10/java-ssh框架-3/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="ssh框架介绍与简单实例"><a href="#ssh框架介绍与简单实例" class="headerlink" title="ssh框架介绍与简单实例"></a>ssh框架介绍与简单实例</h2><h3 id="ssh框架简介"><a href="#ssh框架简介" class="headerlink" title="ssh框架简介"></a>ssh框架简介</h3><h4 id="spring"><a href="#spring" class="headerlink" title="spring"></a>spring</h4><p>Spring是一个J2EE开发的强大框架，提供了管理业务对象的一致方法并且鼓励了注入对接口编程而不是对类编程的良好习惯。通俗点说，就是通过xml形式或者注解形式将类集合成一个个封装后的Bean，再由spring容器进行管理访问，实现类层模块的松散耦合。spring有两个主要的概念或者说设计思想，即为IoC(控制反转)和DI(依赖注入)。</p>
<h5 id="IoC-Inversion-of-Control"><a href="#IoC-Inversion-of-Control" class="headerlink" title="IoC-Inversion of Control"></a>IoC-Inversion of Control</h5><p>Ioc意味着将你设计好的对象交给容器控制，而不是传统的在你的对象内部直接控制。Ioc很好的体现了面向对象设计法则之一–好莱坞法则：别找我们，我们找你。<br>所有的类封装成Bean都会在spring容器中登记，告诉spring你是个什么东西，你需要什么东西，然后spring会在系统运行到适当的时候，把你要的东西主动给你，同时也把你交给其他需要你的东西。所有的类的创建、销毁都由 spring来控制，也就是说控制对象生存周期的不再是引用它的对象，而是spring。对于某个具体的对象而言，以前是它控制其他对象，现在是所有对象都被spring控制</p>
<ul>
<li>谁控制谁，控制什么<br>传统Java SE程序设计，我们直接在对象内部通过new进行创建对象，是程序主动去创建依赖对象；而Ioc是有专门一个容器来创建这些对象，即由Ioc容器来控制对象的创建以及外部资源的获取。</li>
<li>为何是反转，哪些方面反转了<br>传统应用程序是由我们自己在对象中主动控制去直接获取依赖对象，即为正转；而反转则是由容器帮忙创建及注入依赖对象，对象只是被动的接收依赖对象，即为依赖对象的获取被反转了。  </li>
</ul>
<p>传统程序设计都是主动去创建相关对象然后再组合起来的。<code>EmployeeDAO dao=new EmployeeDAO()</code>使用传统方法不仅强耦合性，而且代码繁杂，<code>EmployeeDAO</code> 类需要构造方法。<br><img src="/2018/03/10/java-ssh框架-3/pic1.png" alt="传统应用程序示意图"><br>而在Ioc/DI容器，在客户端中不再主动去创建这些对象。<code>@Autowired EmployeeDAO dao;</code>其中<code>@Autowired</code>注释，它可以对类成员变量、方法及构造函数进行标注，完成自动装配的工作。当容器扫描到该注释时，就会在Ioc容器中自动寻找对应的Bean，并装配给该对象的属性。<br><img src="/2018/03/10/java-ssh框架-3/pic2.png" alt="spring应用程序示意图"></p>
<h5 id="DI-Dependency-Injection"><a href="#DI-Dependency-Injection" class="headerlink" title="DI-Dependency Injection"></a>DI-Dependency Injection</h5><p>组件之间依赖关系由容器在运行期决定，形象的说，即由容器动态的将某个依赖关系注入到组件之中。</p>
<ul>
<li>谁依赖于谁：应用程序依赖于Ioc容器</li>
<li>为什么需要依赖：应用程序需要Ioc容器来提供对象需要的外部资源</li>
<li>谁注入谁：Ioc容器注入应用程序某个对象，应用程序依赖的对象</li>
<li>注入了什么：注入某个对象所需要的外部资源(包括对象、资源、常量数据)  </li>
</ul>
<p>通俗点说，比如对象A需要操作数据库，以前我们总是要在A中自己编写代码来获得一个Connection对象，有了 spring我们就只需要告诉spring，A中需要一个Connection，至于这个Connection怎么构造，何时构造，A不需要知道。在系统运行时，spring会在适当的时候制造一个Connection，然后像打针一样，注射到A当中，这样就完成了对各个对象之间关系的控制。A需要依赖 Connection才能正常运行，而这个Connection是由spring注入到A中的，依赖注入的名字就这么来的。</p>
<h4 id="Struts2"><a href="#Struts2" class="headerlink" title="Struts2"></a>Struts2</h4><p>Struts2是轻量级的MVC框架，主要解决了请求分发的问题，重心在控制层和表现层。低侵入性，与业务层代码的耦合度很低。实现了MVC，并提供了一系列API，采用模式化方式简化业务开发过程。<br>不同框架实现MVC的方式比较：<br>Servlet:<br><img src="/2018/03/10/java-ssh框架-3/pic3.png" alt="servlet"><br>Spring:<br><img src="/2018/03/10/java-ssh框架-3/pic4.png" alt="spring"><br>Struts2:<br><img src="/2018/03/10/java-ssh框架-3/pic5.png" alt="struts2"><br>Struts2利用过滤器，拦截客户端的请求。客户端发送请求，经过Struts2的过滤器，将HttpServletRequest参数和HttpServletResponse参数封装，利用java反射机制将请求分派给映射的Action。根据Action的执行结果，转向其他Action或jsp页面。</p>
<h4 id="Hibernate"><a href="#Hibernate" class="headerlink" title="Hibernate"></a>Hibernate</h4><p>Hibernate是一个开源ORM(Object/Relationship Mipping)框架，它是对象关联关系映射的持久层框架 ，它对JDBC做了轻量级的封装，而程序员可以使用面向对象的思想来操纵数据库。<br>五个核心接口：</p>
<ul>
<li>Configuration:负责配置并启动Hibernate，创建SessionFactory</li>
<li>SessionFactory:负责初始化Hibernate，创建session对象</li>
<li>Session:负责被持久化对象CRUD操作</li>
<li>Transaction:负责事物相关的操作</li>
<li>Query:负责执行各种数据库查询</li>
</ul>
<p>Hibernate核心接口<br><img src="/2018/03/10/java-ssh框架-3/pic9.png" alt="hibernate接口"></p>
<ul>
<li>Configuration<br>Configuration是Hibernate的入口，负责将配置文件信息加载到内存，并创建一个sessionFactory对象，把读入的配置信息加载到sessionFactory对象的内存里。</li>
<li><p>SessionFactory<br>负责创建session实例，每个sessionFactory实例对应一个数据库。sessionFactory是重量级的，占用缓存较大。<br><code>特点：</code><br>1，线程安全，同一个实例可以被应用的多个线程共享<br>2，重量级，不能随意创建和销毁他的实例，一个数据库，只需要创建一个SessionFactory的实例。<br>3，以后对Configuration对象势力作出的修改都不会影响已经创建好的SessionFactory实例，如果需要使用基于改动后的Configuration实例的SessionFactory，需要从Configuration对象中重新创建新的SessionFactory实例。<br><code>用法：</code>  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Configuration config = <span class="keyword">new</span> Configuration();   </span><br><span class="line">ServiceRegistry  sr = <span class="keyword">new</span> ServiceRegistryBuilder().applySettings(config.getProperties()).buildServiceRegistry();</span><br><span class="line">SessionFactory sessionFactory = config.buildSessionFactory(sr);</span><br></pre></td></tr></table></figure>
</li>
<li><p>session<br>session是Hibernate持久化操作的基础，负责管理所有与持久化有关的操作，是轻量级的，也是非线程安全的。创建和销毁不会消耗太多资源，可以为每一个请求分配一个session。<br><code>特点：</code><br>1，不是线程安全的，应该避免多个线程共享同一个Session实例。<br>2，Session实例是轻量级的。<br>3，Session对象内部有一个缓存，被称为Hibernate第一缓存，他存放被当前工作单元中加载的对象，每个Session实例都有自己的缓存。<br><code>用法：</code>  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Session session = sessionFactory.openSession();</span><br><span class="line">常用方法：</span><br><span class="line">session.save();</span><br><span class="line">session.update();</span><br><span class="line">session.saveOrUpdate();</span><br><span class="line">session.delete();</span><br></pre></td></tr></table></figure>
</li>
<li><p>transaction<br>transaction负责Hibernate的数据库事务，其实Hibernate本身并不具有事务管理的能力，只是对底层事务接口进行了封装，这样有利于在不同环境或容器中移植，也可以直接访问底层的事务接口。<br><code>用法：</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Transaction tx=session.beginTransaction();</span><br></pre></td></tr></table></figure>
</li>
<li><p>Query和Criteria<br>都是负责Hibernate的查询操作。<br>Query实例封装了一个HQL(Hibernate Query Language)查询语句，HQL与SQL有些类似，只是HQL是面向对象的，它操作的是持久化类的类名和属性名，而SQL操作的是表名和字段名。<br>Criteria实例完全封装了字符串形式的查询语句，它比Query实例更加面向对象，更适合执行动态查询。</p>
</li>
</ul>
<p>Hibernate基本执行流程<br><img src="/2018/03/10/java-ssh框架-3/pic6.png" alt="hibernate"></p>
<h3 id="ssh框架的简单实例"><a href="#ssh框架的简单实例" class="headerlink" title="ssh框架的简单实例"></a>ssh框架的简单实例</h3><p>SSH的执行流程为：  </p>
<ul>
<li>jsp页面，提交表单或者点击链接会触发一个action</li>
<li>action交给struts2处理，读取struts.xml文件，在配置中找到对应的action。</li>
<li>根据struts.xml文件中找到的class=”…Action”交给Spring，读取Spring容器的配置文件applicationContext文件。根据配置文件找到xxx.xxx.action.xxxAction类，其中有一个属性是xxxService，并提供setxxxService()方法，由配置文件得知该xxxService对象由Spring容器依赖注入，set注入。</li>
<li>取得xxxService对象(接口对接口实现类的一个引用)后，调用它的方法。后面就是访问DAO。</li>
<li><p>执行的结果会在action的对应的方法中以字符串的形式给出。然后根据struts.xml中的result找到下一步要执行的动作，是跳转到页面显示还是继续交给其他的action处理。<br><img src="/2018/03/10/java-ssh框架-3/pic7.png" alt="ssh执行流程"></p>
<p><img src="/2018/03/10/java-ssh框架-3/pic8.png" alt="ssh执行流程"></p>
<h4 id="第一步、配置ssh框架环境"><a href="#第一步、配置ssh框架环境" class="headerlink" title="第一步、配置ssh框架环境"></a>第一步、配置ssh框架环境</h4><p>添加spring,struts2以及Hibernate的jar包。</p>
<h4 id="第二步、web-xml的配置"><a href="#第二步、web-xml的配置" class="headerlink" title="第二步、web.xml的配置"></a>第二步、web.xml的配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;filter&gt;</span><br><span class="line">    &lt;filter-name&gt;struts2&lt;/filter-name&gt;</span><br><span class="line">    &lt;filter-class&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;</span><br><span class="line">  &lt;/filter&gt;</span><br><span class="line">  &lt;filter-mapping&gt;</span><br><span class="line">    &lt;filter-name&gt;struts2&lt;/filter-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br><span class="line">  &lt;/filter-mapping&gt;</span><br><span class="line">  &lt;!-- Spring框架的核心监听器 --&gt;</span><br><span class="line">  &lt;listener&gt;</span><br><span class="line">    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;</span><br><span class="line">  &lt;/listener&gt;</span><br><span class="line">  &lt;context-param&gt;</span><br><span class="line">    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span><br><span class="line">    &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;</span><br><span class="line">  &lt;/context-param&gt;</span><br><span class="line"></span><br><span class="line">   &lt;filter&gt;</span><br><span class="line">   	&lt;filter-name&gt;OpenSessionInviewFilter&lt;/filter-name&gt;</span><br><span class="line">   	&lt;filter-class&gt;org.springframework.orm.hibernate4.support.OpenSessionInViewFilter&lt;/filter-class&gt;</span><br><span class="line">   &lt;/filter&gt;</span><br><span class="line">  &lt;filter-mapping&gt;</span><br><span class="line">  	&lt;filter-name&gt;OpenSessionInviewFilter&lt;/filter-name&gt;</span><br><span class="line">  	&lt;url-pattern&gt;*.action&lt;/url-pattern&gt;</span><br><span class="line">  &lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><code>web.xml</code>配置文件主要包括三个部分：</p>
<ul>
<li>Struts、Hibernate的过滤器配置</li>
<li>Spring监听激活</li>
<li>Spring、Hibernate的初始化配置文件的位置<br><code>Filter</code>过滤器的配置节点介绍：  </li>
<li><code>&lt;filter&gt;</code>指定一个过滤器</li>
<li><code>&lt;filter-name&gt;</code>用于为过滤器指定一个名字，该元素的内容不能为空</li>
<li><code>&lt;filter-class&gt;</code>元素用于指定过滤器的完整的限定类名</li>
<li><code>&lt;init-param&gt;</code>元素用于为过滤器指定初始化参数，它的子元素<code>&lt;param-name&gt;</code>指定参数的名字，<code>&lt;param-value&gt;</code>指定参数的值。在过滤器中，可以使用FilterConfig接口对象来访问初始化参数。</li>
<li><code>&lt;filter-mapping&gt;</code>元素用于设置一个Filter所负责拦截的资源。一个Filter拦截的资源可通过两种方式来指定：Servlet名称和资源访问的请求路径。<code>&lt;filter-name&gt;</code>子元素用于设置filter的注册名称。该值必须是在<code>&lt;filter&gt;</code>元素中声明过的过滤器的名字。<code>&lt;url-pattern&gt;</code>设置filter所拦截的请求路径(过滤器关联的URL样式)<h4 id="第三步、application-xml的配置"><a href="#第三步、application-xml的配置" class="headerlink" title="第三步、application.xml的配置"></a>第三步、application.xml的配置</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 引入外部属性文件 --&gt;</span><br><span class="line">	&lt;context:property-placeholder location=<span class="string">"classpath:jdbc.properties"</span>/&gt;</span><br><span class="line">	&lt;!-- 配置c3p0连接池 --&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"dataSource"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span><br><span class="line">		&lt;property name="driverClass" value="$&#123;jdbc.driverClass&#125;"&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name="jdbcUrl" value="$&#123;jdbc.url&#125;"&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name="user" value="$&#123;jdbc.username&#125;"&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name="password" value="$&#123;jdbc.password&#125;"&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 配置Hibernate的相关属性,与数据库链接相关的 --&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"sessionFactory"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"org.springframework.orm.hibernate3.LocalSessionFactoryBean"</span>&gt;</span><br><span class="line">		&lt;!-- 注入连接池 --&gt;</span><br><span class="line">		&lt;property name="dataSource" ref="dataSource"&gt;&lt;/property&gt;</span><br><span class="line">		&lt;!-- 配置 hibernate属性 --&gt;</span><br><span class="line">		&lt;property name=<span class="string">"hibernateProperties"</span>&gt;</span><br><span class="line">			&lt;props&gt;</span><br><span class="line">				&lt;prop key="hibernate.dialect"&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;</span><br><span class="line">				&lt;prop key="hibernate.show_sql"&gt;true&lt;/prop&gt;</span><br><span class="line">				&lt;prop key="hibernate.format_sql"&gt;true&lt;/prop&gt;</span><br><span class="line">				&lt;prop key="hibernate.hbm2ddl.auto"&gt;update&lt;/prop&gt;</span><br><span class="line">			&lt;/props&gt;</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line">		&lt;!-- 加载hibernate中的映射文件,源代码中是以数组的形式来写的，所以这里用list标签 --&gt;</span><br><span class="line">		&lt;property name=<span class="string">"mappingResources"</span>&gt;</span><br><span class="line">			&lt;list&gt;</span><br><span class="line">				&lt;value&gt;com/JackeyZz/employee/domain/Department.hbm.xml&lt;/value&gt;</span><br><span class="line">				&lt;value&gt;com/JackeyZz/employee/domain/Employee.hbm.xml&lt;/value&gt;</span><br><span class="line">			&lt;/list&gt;</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	&lt;!-- 配置Action的类 --&gt;</span><br><span class="line">	&lt;!--</span><br><span class="line">		scope=<span class="string">"prototype"</span>  默认是singleton，即单例的，只在容器初始化时创建一次</span><br><span class="line">		prototype 是表示在每个调用时都会产生新的实例</span><br><span class="line">	 --&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"employeeAction"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.JackeyZz.employee.action.EmployeeAction"</span> scope=<span class="string">"prototype"</span>&gt;</span><br><span class="line">		&lt;property name="employeeService" ref="employeeService"&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name="departmentService" ref="departmentService"&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"departmentAction"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.JackeyZz.employee.action.DepartmentAction"</span> scope=<span class="string">"prototype"</span>&gt;</span><br><span class="line">		&lt;property name="departmentService" ref="departmentService"&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	&lt;!-- 配置业务层的类 --&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"employeeService"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.JackeyZz.employee.service.impl.EmployeeServiceImpl"</span>&gt;</span><br><span class="line">		&lt;property name="employeeDao" ref="employeeDao"&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"departmentService"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.JackeyZz.employee.service.impl.DepartmentServiceImpl"</span>&gt;</span><br><span class="line">		&lt;property name="departmentDao" ref="departmentDao"&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	&lt;!-- 配置工具类 --&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"hibernateUtil"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.JackeyZz.employee.util.HibernateUtil"</span>&gt;</span><br><span class="line">		&lt;property name="sessionFactory" ref="sessionFactory"&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	&lt;!-- 配置DAO的类 --&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"employeeDao"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.JackeyZz.employee.dao.impl.EmployeeDaoImpl"</span>&gt;</span><br><span class="line">		&lt;property name="hibernateUtil" ref="hibernateUtil"&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"departmentDao"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.JackeyZz.employee.dao.impl.DepartmentDaoImpl"</span>&gt;</span><br><span class="line">		&lt;property name="hibernateUtil" ref="hibernateUtil"&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	&lt;!-- 配置事务管理器 --&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"transactionManager"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"org.springframework.orm.hibernate3.HibernateTransactionManager"</span>&gt;</span><br><span class="line">		&lt;property name="sessionFactory" ref="sessionFactory"&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 开启注解事务 --&gt;</span><br><span class="line">	&lt;tx:annotation-driven transaction-manager=<span class="string">"transactionManager"</span>/&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><code>applicationContext.xml</code>配置文件主要包括三个部分：</p>
<ul>
<li>Hibernate的配置  <ul>
<li>引入外部属性文件：<code>&lt;context:property-placeholder location=&quot;...&quot;/&gt;</code></li>
<li>配置c3p0连接池</li>
<li>配置Hibernate的相关属性-sessionFactory:注入连接池、配置属性、加载映射文件</li>
</ul>
</li>
<li>Struts2的Action配置、依赖注入</li>
<li>配置事务管理器，依赖注入会话工厂sessionFactory</li>
</ul>
<p>Hibernate主要是使用它的<code>ORM机制</code>，然后把传统的关系型数据库操作，转换成面向对象的方式来操作。<code>ORM机制</code>可以将对应的数据库的表，映射为一个对象(比如department)，然后在表单对应的input的name上，填写对应对象的对应属性，最后在保存的时候，在提交的action中，定义一个department的对象实例，那么这些数据就会自动保存在这个对象中了，然后只需要保存这个对象就ok。<br><code>sessionFactory</code>接口负责初始化Hibernate,它充当数据存储源的代理，并负责创建Session对象。<br>Hibernate的<code>Session</code>用来表示应用程序和数据库的一次交互(会话)。在这个Session中，包含了一般的持久化方法(CRUD)，即create、Retrieve(读取查询)、Update、Delete。而且Session是一个轻量级对象(线程不安全)，通常将每个Session实例和一个数据库事务绑定，也就是每执行一个数据库事务，都应该先创建一个新的Session实例，在使用Session后，还需要关闭Session。</p>
<h4 id="第四步、struts-xml的配置"><a href="#第四步、struts-xml的配置" class="headerlink" title="第四步、struts.xml的配置"></a>第四步、struts.xml的配置</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;struts&gt;</span><br><span class="line">	&lt;!-- Action 是一个类 --&gt;</span><br><span class="line">	&lt;!-- include节点是struts中组件化的方式 可以将每个功能模块独立到一个XML配置文件中，然后用include节点引入进来 --&gt;</span><br><span class="line">	&lt;!-- &lt;include file="struts-default.xml"&gt;&lt;/include&gt;   --&gt;</span><br><span class="line">	&lt;!-- <span class="keyword">package</span>提供了将多个Action组织为一个模块的方式</span><br><span class="line">		<span class="keyword">package</span>名字必须是唯一的</span><br><span class="line">		<span class="keyword">package</span>可以扩展，即继承   父<span class="keyword">package</span>必须在子<span class="keyword">package</span>前配置</span><br><span class="line">		name:<span class="keyword">package</span>名称</span><br><span class="line">		extends:继承父<span class="keyword">package</span>的名称</span><br><span class="line">		<span class="keyword">abstract</span>:设置<span class="keyword">package</span>的属性为抽象的 ，抽象的<span class="keyword">package</span>不能定义action 取值为<span class="keyword">true</span>|<span class="keyword">false</span></span><br><span class="line">		namespace:定义<span class="keyword">package</span>的命名空间，影响url地址，例如定义为/test,则为http:<span class="comment">//localhost:8080/工程名/test/XX.action</span></span><br><span class="line">	 --&gt;</span><br><span class="line">	&lt;!-- Action 是一个类 --&gt;</span><br><span class="line">	&lt;!-- Action配置    一个Action可以多次映射（只要action配置中的name不同）</span><br><span class="line">			name:action名称    访问路径：http:<span class="comment">//localhost:8080/工程名/test/product_save.action</span></span><br><span class="line">			class:对应的类</span><br><span class="line">			method:调用Action中的方法名</span><br><span class="line">		*是匹配</span><br><span class="line">	--&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 由于Action交由spring管理，这里便不再需要在<span class="class"><span class="keyword">class</span>属性中指定类路径了，只需要配置属性值为<span class="title">spring</span>中的<span class="title">id</span> --&gt;</span></span><br><span class="line"><span class="class">	&lt;<span class="title">package</span> <span class="title">name</span></span>=<span class="string">"ssh"</span> extends=<span class="string">"struts-default"</span> namespace=<span class="string">"/"</span>&gt;</span><br><span class="line">		&lt;action name=<span class="string">"employee_*"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"employeeAction"</span> method=<span class="string">"&#123;1&#125;"</span>&gt;</span><br><span class="line">			&lt;result name="input"&gt;/index.jsp&lt;/result&gt;</span><br><span class="line">			&lt;result name="success" type="redirect"&gt;/frame.jsp&lt;/result&gt;</span><br><span class="line">			&lt;result name="findAll"&gt;/frame/listEmployee.jsp&lt;/result&gt;</span><br><span class="line">			&lt;result name="saveUI"&gt;/frame/addEmployee.jsp&lt;/result&gt;</span><br><span class="line">			&lt;result name="saveSuccess" type="redirectAction"&gt;employee_findAll.action&lt;/result&gt;</span><br><span class="line">			&lt;result name="editSuccess"&gt;/frame/editEmployee.jsp&lt;/result&gt;</span><br><span class="line">			&lt;result name="updateSuccess" type="redirectAction"&gt;employee_findAll.action&lt;/result&gt;</span><br><span class="line">			&lt;result name="deleteSuccess" type="redirectAction"&gt;employee_findAll.action&lt;/result&gt;</span><br><span class="line">		&lt;/action&gt;</span><br><span class="line">		&lt;action name=<span class="string">"department_*"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"departmentAction"</span> method=<span class="string">"&#123;1&#125;"</span>&gt;</span><br><span class="line">			&lt;result name="findAll"&gt;/frame/listDep.jsp&lt;/result&gt;</span><br><span class="line">			&lt;result name="saveUI"&gt;/frame/addDepartment.jsp&lt;/result&gt;</span><br><span class="line">			&lt;!-- 添加成功就重定向到action --&gt;</span><br><span class="line">			&lt;result name="saveSuccess" type="redirectAction"&gt;department_findAll.action&lt;/result&gt;</span><br><span class="line">			&lt;result name="editSuccess"&gt;/frame/editDepartment.jsp&lt;/result&gt;</span><br><span class="line">			&lt;result name="updateSuccess" type="redirectAction"&gt;department_findAll.action&lt;/result&gt;</span><br><span class="line">			&lt;result name="deleteSuccess" type="redirectAction"&gt;department_findAll.action&lt;/result&gt;</span><br><span class="line">		&lt;/action&gt;</span><br><span class="line">	&lt;/package&gt;</span><br><span class="line">&lt;/struts&gt;</span><br></pre></td></tr></table></figure>
<p><code>&lt;action name=&quot;employee_*&quot; class=&quot;employeeAction&quot; method=&quot;{1}&quot;&gt;</code>当用到method={数字}时，相应的前面的action是要出现<code>*</code>通配符来搭配。假设对应的jsp中：<code>&lt;form action=&quot;employee_save&quot; method=&quot;post&quot;&gt;</code>,那么struts会将<code>employee_save</code>这个action安装<code>employee_*</code>的格式解析，把该数字对应位置的字符串取出来，放到<code>method={}</code>这个中括号里代替数字的位置。<br>其中，class和method属性锁定了后台执行函数，当jsp的action锁定了<code>struts.xml</code>中的action,将class中的类交给了spring管理(故此处不需要类的路径，只需要表明spring的属性Bean ID)完成类层的依赖注入关系，同时在Spring配置文件中找到对应的class的类并跳入某Action类进行业务处理，method即为要处理的业务方法，最后一层一层调用方法，返回结果返回到<code>Struts.xml</code>识别result值，再映射到下一步动作(静态显示jsp或者重定向.action)。</p>
<h4 id="第五步、domain层-model层-以及映射文件"><a href="#第五步、domain层-model层-以及映射文件" class="headerlink" title="第五步、domain层(model层)以及映射文件"></a>第五步、domain层(model层)以及映射文件</h4><p><code>Department.java</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Department</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Integer did;	<span class="comment">//部门id</span></span><br><span class="line">	<span class="keyword">private</span> String dname;	<span class="comment">//部门名称</span></span><br><span class="line">	<span class="keyword">private</span> String ddesc;	<span class="comment">//部门描述</span></span><br><span class="line">	<span class="keyword">private</span> Set&lt;Employee&gt; employees = <span class="keyword">new</span> HashSet&lt;Employee&gt;();</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getDid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> did;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDid</span><span class="params">(Integer did)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.did = did;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getDname</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> dname;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDname</span><span class="params">(String dname)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.dname = dname;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getDdesc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> ddesc;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDdesc</span><span class="params">(String ddesc)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.ddesc = ddesc;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Set&lt;Employee&gt; <span class="title">getEmployees</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> employees;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmployees</span><span class="params">(Set&lt;Employee&gt; employees)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.employees = employees;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Department</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>Department.hbm.xml</code><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;!DOCTYPE hibernate-mapping PUBLIC <span class="string">"-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span></span><br><span class="line"><span class="string">"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"</span>&gt;</span><br><span class="line">&lt;!-- Generated <span class="number">2016</span>-<span class="number">9</span>-<span class="number">12</span> <span class="number">9</span>:<span class="number">12</span>:<span class="number">35</span> by Hibernate Tools <span class="number">3.4</span>.0.CR1 --&gt;</span><br><span class="line">&lt;hibernate-mapping&gt;</span><br><span class="line">	&lt;<span class="class"><span class="keyword">class</span> <span class="title">name</span></span>=<span class="string">"com.JackeyZz.employee.domain.Department"</span> table=<span class="string">"department"</span>&gt;</span><br><span class="line">		&lt;id name=<span class="string">"did"</span> column=<span class="string">"did"</span>&gt;</span><br><span class="line">			&lt;generator class="native"&gt;&lt;/generator&gt;</span><br><span class="line">		&lt;/id&gt;</span><br><span class="line">		&lt;property name="dname" column="dname" length="20"&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name="ddesc" column="ddesc"&gt;&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">		&lt;!--</span><br><span class="line">			配置关联关系的映射</span><br><span class="line">			name对应类中的属性</span><br><span class="line">			<span class="class"><span class="keyword">class</span>对应属性属于哪个类</span></span><br><span class="line"><span class="class">			<span class="title">column</span>对应该属性对应数据库中的哪一列，该列是外键</span></span><br><span class="line"><span class="class">			<span class="title">cascade</span></span>=<span class="string">"delete"</span>  是一个级联属性，删除部门时该部门下的员工一起删除</span><br><span class="line">			inverse=<span class="string">"true"</span>    放弃外键维护权 <span class="keyword">true</span>是放弃，<span class="keyword">false</span>是不放弃</span><br><span class="line">		 --&gt;</span><br><span class="line">		&lt;set name=<span class="string">"employees"</span> cascade=<span class="string">"delete"</span> inverse=<span class="string">"true"</span>&gt;</span><br><span class="line">			&lt;key column="dno"&gt;&lt;/key&gt;</span><br><span class="line">			&lt;one-to-many <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.JackeyZz.employee.domain.Employee"</span>/&gt;</span><br><span class="line">		&lt;/set&gt;</span><br><span class="line">	&lt;/class&gt;</span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure></p>
<p>xxx.hbm.xml主要实现数据库的表的字段与domain层的属性变量关联。其中<code>&lt;id name=&quot;xx&quot; column=&quot;xx&quot;&gt; &lt;generator class=&quot;native&quot;&gt;&lt;/generator&gt;&lt;/id&gt;</code>设置主键映射，<code>native</code>是HIbernate主键生成器的实现算法之一。<code>&lt;property&gt;</code>是配置普通属性的映射，其中<code>name</code>与<code>column</code>名称一致实现关联。<code>&lt;set&gt;</code>实现与其他数据表的级联关系。</p>
<h4 id="第六步、DAO层实现数据库连接以及CRUD操作"><a href="#第六步、DAO层实现数据库连接以及CRUD操作" class="headerlink" title="第六步、DAO层实现数据库连接以及CRUD操作"></a>第六步、DAO层实现数据库连接以及CRUD操作</h4><p><code>HibernateUtil.java</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HibernateUtil</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> SessionFactory sessionFactory;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Session session;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSessionFactory</span><span class="params">(SessionFactory sessionFactory)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">this</span>.sessionFactory = sessionFactory;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//获取SessionFactory</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SessionFactory <span class="title">getSessionFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> sessionFactory;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//获取Session</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Session <span class="title">getSession</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		session = sessionFactory.openSession();</span><br><span class="line">		<span class="keyword">return</span> session;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//关闭Session</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">closeSession</span><span class="params">(Session session)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(session != <span class="keyword">null</span>) &#123;</span><br><span class="line">			session.close();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>通过这个工具类实现创建会话工厂<code>sessionFactory</code>以及打开会话<code>session</code>，为对操作数据库表做准备。<br><code>DepartmentDao.java</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 部门管理的DAO层接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">DepartmentDao</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">findCount</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function">List&lt;Department&gt; <span class="title">findByPage</span><span class="params">(<span class="keyword">int</span> begin, <span class="keyword">int</span> pageSize)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">save</span><span class="params">(Department department)</span></span>;</span><br><span class="line">	<span class="function">Department <span class="title">findById</span><span class="params">(Integer did)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(Department department)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">delete</span><span class="params">(Department department)</span></span>;</span><br><span class="line">	<span class="function">List&lt;Department&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>DepartmentDaoImpl.java</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 部门管理DAO层的实现类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DepartmentDaoImpl</span> <span class="keyword">implements</span> <span class="title">DepartmentDao</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> HibernateUtil hibernateUtil;</span><br><span class="line">	<span class="keyword">private</span> Session session;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHibernateUtil</span><span class="params">(HibernateUtil hibernateUtil)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.hibernateUtil = hibernateUtil;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//统计总的数目</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		String hql = <span class="string">"select count(*) from Department"</span>;</span><br><span class="line">		session = hibernateUtil.getSession();</span><br><span class="line">		Query query = session.createQuery(hql);</span><br><span class="line">		<span class="keyword">int</span> count = ((Long) query.setCacheable(<span class="keyword">true</span>).uniqueResult()).intValue();</span><br><span class="line">		<span class="keyword">if</span>(count &gt; <span class="number">0</span> ) &#123;</span><br><span class="line">			<span class="comment">//System.out.println(count);</span></span><br><span class="line">			<span class="keyword">return</span> count;</span><br><span class="line">		&#125;</span><br><span class="line">		hibernateUtil.closeSession(session);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">	<span class="comment">//查询每页显示的数据</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Department&gt; <span class="title">findByPage</span><span class="params">(<span class="keyword">int</span> begin, <span class="keyword">int</span> pageSize)</span> </span>&#123;</span><br><span class="line">		String hql = <span class="string">"from Department"</span>;</span><br><span class="line">		session = hibernateUtil.getSession();</span><br><span class="line">		Query query = session.createQuery(hql);</span><br><span class="line">		<span class="comment">//按参数位置绑定查询条件</span></span><br><span class="line">		System.out.println(begin);</span><br><span class="line">		System.out.println(pageSize);</span><br><span class="line">		query.setFirstResult(begin);</span><br><span class="line">		query.setMaxResults(pageSize);</span><br><span class="line">		List&lt;Department&gt; list = query.list();</span><br><span class="line">		hibernateUtil.closeSession(session);</span><br><span class="line">		<span class="keyword">return</span> list;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//DAO中实现存储部门的方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(Department department)</span> </span>&#123;</span><br><span class="line">		session = hibernateUtil.getSession();</span><br><span class="line">		session.save(department);</span><br><span class="line">		hibernateUtil.closeSession(session);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//DAO中根据部门id查询部门</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Department <span class="title">findById</span><span class="params">(Integer did)</span> </span>&#123;</span><br><span class="line">		session = hibernateUtil.getSession();</span><br><span class="line">		Department department = (Department) session.get(Department.class, did);</span><br><span class="line">		hibernateUtil.closeSession(session);</span><br><span class="line">		<span class="keyword">return</span> department;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//DAO中修改部门的方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(Department department)</span> </span>&#123;</span><br><span class="line">		session = hibernateUtil.getSession();</span><br><span class="line">		Transaction transaction = session.beginTransaction();</span><br><span class="line">		session.update(department);</span><br><span class="line">		transaction.commit();</span><br><span class="line">		hibernateUtil.closeSession(session);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//DAO中删除部门的方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Department department)</span> </span>&#123;</span><br><span class="line">		session = hibernateUtil.getSession();</span><br><span class="line">		Transaction transaction = session.beginTransaction();</span><br><span class="line">		session.delete(department);</span><br><span class="line">		transaction.commit();</span><br><span class="line">		hibernateUtil.closeSession(session);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//查询所有部门的方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Department&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		String hql = <span class="string">"from Department"</span>;</span><br><span class="line">		session = hibernateUtil.getSession();</span><br><span class="line">		Query query = session.createQuery(hql);</span><br><span class="line">		List&lt;Department&gt; list = query.list();</span><br><span class="line">		hibernateUtil.closeSession(session);</span><br><span class="line">		<span class="keyword">return</span> list;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="第七步、Service层类的实现"><a href="#第七步、Service层类的实现" class="headerlink" title="第七步、Service层类的实现"></a>第七步、Service层类的实现</h4><p><code>DepartmentService.java</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 部门业务层的接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">DepartmentService</span> </span>&#123;</span><br><span class="line">	<span class="function">PageBean&lt;Department&gt; <span class="title">findByPage</span><span class="params">(Integer currPage)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">save</span><span class="params">(Department department)</span></span>;</span><br><span class="line">	<span class="function">Department <span class="title">findById</span><span class="params">(Integer did)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(Department department)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">delete</span><span class="params">(Department department)</span></span>;</span><br><span class="line">	<span class="function">List&lt;Department&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>DepartmentServiceImpl.java</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 部门业务层的实现类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DepartmentServiceImpl</span> <span class="keyword">implements</span> <span class="title">DepartmentService</span> </span>&#123;</span><br><span class="line">	<span class="comment">//注入部门管理的DAO</span></span><br><span class="line">	<span class="keyword">private</span> DepartmentDao departmentDao;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDepartmentDao</span><span class="params">(DepartmentDao departmentDao)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.departmentDao = departmentDao;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//分页查询部门的方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> PageBean&lt;Department&gt; <span class="title">findByPage</span><span class="params">(Integer currPage)</span> </span>&#123;</span><br><span class="line">		PageBean&lt;Department&gt; pageBean = <span class="keyword">new</span> PageBean&lt;Department&gt;();</span><br><span class="line">		<span class="comment">//封装当前页数</span></span><br><span class="line">		pageBean.setCurrPage(currPage);</span><br><span class="line">		<span class="comment">//封装每页显示的记录数</span></span><br><span class="line">		<span class="keyword">int</span> pageSize = <span class="number">3</span>;	<span class="comment">//每页显示3条</span></span><br><span class="line">		pageBean.setPageSize(pageSize);</span><br><span class="line">		<span class="comment">//封装总记录数</span></span><br><span class="line">		<span class="keyword">int</span> totalCount = departmentDao.findCount();</span><br><span class="line">		pageBean.setTotalCount(totalCount);</span><br><span class="line">		<span class="comment">//封装总页数</span></span><br><span class="line">		<span class="keyword">double</span> tc = totalCount;</span><br><span class="line">		Double num = Math.ceil(tc/pageSize);	<span class="comment">//向上取整</span></span><br><span class="line">		pageBean.setTotalPage(num.intValue());</span><br><span class="line">		<span class="comment">//封装每页显示的数据</span></span><br><span class="line">		<span class="keyword">int</span> begin = (currPage - <span class="number">1</span>)*pageSize;</span><br><span class="line">		List&lt;Department&gt; list = departmentDao.findByPage(begin, pageSize);</span><br><span class="line">		pageBean.setList(list);</span><br><span class="line">		<span class="keyword">return</span> pageBean;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//业务层保存部门的方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(Department department)</span> </span>&#123;</span><br><span class="line">		departmentDao.save(department);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//业务层根据部门id查询部门的方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Department <span class="title">findById</span><span class="params">(Integer did)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> departmentDao.findById(did);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//业务层实现的部门更新方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(Department department)</span> </span>&#123;</span><br><span class="line">		departmentDao.update(department);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//业务层删除部门的方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Department department)</span> </span>&#123;</span><br><span class="line">		departmentDao.delete(department);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Department&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> departmentDao.findAll();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="第八步、Action层-controller-的实现"><a href="#第八步、Action层-controller-的实现" class="headerlink" title="第八步、Action层(controller)的实现"></a>第八步、Action层(controller)的实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 部门管理的Action类</span></span><br><span class="line"><span class="comment"> * 利用模型驱动ModelDriven&lt;Department&gt;接收页面的参数,可以是表单提交的数据，也可以是某个参数值</span></span><br><span class="line"><span class="comment"> * 然后调用service层</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DepartmentAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> <span class="keyword">implements</span> <span class="title">ModelDriven</span>&lt;<span class="title">Department</span>&gt;</span>&#123;</span><br><span class="line">	<span class="comment">//模型驱动使用的对象</span></span><br><span class="line">	<span class="keyword">private</span> Department department = <span class="keyword">new</span> Department();</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Department <span class="title">getModel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> department;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//注入部门管理的service</span></span><br><span class="line">	<span class="keyword">private</span> DepartmentService departmentService;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDepartmentService</span><span class="params">(DepartmentService departmentService)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.departmentService = departmentService;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//分页功能</span></span><br><span class="line">	<span class="keyword">private</span> Integer currPage=<span class="number">1</span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCurrPage</span><span class="params">(Integer currPage)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.currPage = currPage;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//提供查询的方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		PageBean&lt;Department&gt; pageBean = departmentService.findByPage(currPage);</span><br><span class="line">		<span class="comment">//将pageBean存入值栈中</span></span><br><span class="line">		ActionContext.getContext().getValueStack().push(pageBean);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"findAll"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//添加部门的方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">saveUI</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"saveUI"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//添加部门执行的方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		departmentService.save(department);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"saveSuccess"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//编辑部门的方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">edit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		department = departmentService.findById(department.getDid());</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"editSuccess"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//修改部门执行的方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		departmentService.update(department);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"updateSuccess"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//删除部门的方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">//删除之前先查询是否有该部门</span></span><br><span class="line">		department = departmentService.findById(department.getDid());</span><br><span class="line">		departmentService.delete(department);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"deleteSuccess"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="第九步、前端jsp的实现"><a href="#第九步、前端jsp的实现" class="headerlink" title="第九步、前端jsp的实现"></a>第九步、前端jsp的实现</h4><p><code>addDepartment.jsp</code><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@ taglib uri=<span class="string">"/struts-tags"</span> prefix=<span class="string">"s"</span> %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">String path = request.getContextPath();</span><br><span class="line">String basePath = request.getScheme()+<span class="string">"://"</span>+request.getServerName()+<span class="string">":"</span>+request.getServerPort()+path+<span class="string">"/"</span>;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;table border=<span class="string">"0"</span> width=<span class="string">"600px"</span>&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">&lt;td align="center" style="font-size:24px; color:#666"&gt; 部门添加&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">&lt;td align=<span class="string">"right"</span> &gt;</span><br><span class="line">&lt;a href="javascript:document.getElementById('saveForm').submit()"&gt;保存&lt;/a&gt; &amp;nbsp;&amp;nbsp;</span><br><span class="line">&lt;a href="javascript:history.go(-1)"&gt;退回 &lt;/a&gt;</span><br><span class="line">&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;br/&gt;</span><br><span class="line">&lt;br/&gt;</span><br><span class="line">&lt;!-- action对应一个action标签，id对应提交时的对应关系 --&gt;</span><br><span class="line">&lt;s:form id=<span class="string">"saveForm"</span> action=<span class="string">"department_save"</span> method=<span class="string">"post"</span> namespace=<span class="string">"/"</span> theme=<span class="string">"simple"</span>&gt;</span><br><span class="line">	&lt;table style=<span class="string">"font-size::16px"</span>&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">		  &lt;td&gt;部门名称：&lt;/td&gt;</span><br><span class="line">		  &lt;td&gt;&lt;s:textfield name="dname"/&gt;&lt;/td&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">		  &lt;td&gt;部门介绍：&lt;/td&gt;</span><br><span class="line">		  &lt;td&gt;&lt;/td&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">		  &lt;td width="10%"&gt;&lt;/td&gt;</span><br><span class="line">		  &lt;td&gt;</span><br><span class="line">		     &lt;s:textarea rows="5" cols="50" name="ddesc"&gt;&lt;/s:textarea&gt;</span><br><span class="line">		  &lt;/td&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">	&lt;/table&gt;</span><br><span class="line">&lt;/s:form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/java/" rel="tag"><i class="fa fa-tag"></i> java</a>
          
            <a href="/tags/spring/" rel="tag"><i class="fa fa-tag"></i> spring</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/03/08/java-SpringMVC框架-2/" rel="next" title="java_SpringMVC框架(2)">
                <i class="fa fa-chevron-left"></i> java_SpringMVC框架(2)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/03/11/java-高并发/" rel="prev" title="java_高并发">
                java_高并发 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      
        <div id="gitment-container"></div>
      
    </div>

  


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="JackeyZz">
            
              <p class="site-author-name" itemprop="name">JackeyZz</p>
              <p class="site-description motion-element" itemprop="description">奋不顾身地前进，只为coding未来    得之幸之，失之淡之...</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">46</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">26</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/JackeyZz" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="http://weibo.com/代码dog也要文艺范JackeyZz" target="_blank" title="微博">
                      
                        <i class="fa fa-fw fa-globe"></i>微博</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="460649234@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#ssh框架介绍与简单实例"><span class="nav-number">1.</span> <span class="nav-text">ssh框架介绍与简单实例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ssh框架简介"><span class="nav-number">1.1.</span> <span class="nav-text">ssh框架简介</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#spring"><span class="nav-number">1.1.1.</span> <span class="nav-text">spring</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#IoC-Inversion-of-Control"><span class="nav-number">1.1.1.1.</span> <span class="nav-text">IoC-Inversion of Control</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DI-Dependency-Injection"><span class="nav-number">1.1.1.2.</span> <span class="nav-text">DI-Dependency Injection</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Struts2"><span class="nav-number">1.1.2.</span> <span class="nav-text">Struts2</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Hibernate"><span class="nav-number">1.1.3.</span> <span class="nav-text">Hibernate</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ssh框架的简单实例"><span class="nav-number">1.2.</span> <span class="nav-text">ssh框架的简单实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#第一步、配置ssh框架环境"><span class="nav-number">1.2.1.</span> <span class="nav-text">第一步、配置ssh框架环境</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#第二步、web-xml的配置"><span class="nav-number">1.2.2.</span> <span class="nav-text">第二步、web.xml的配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#第三步、application-xml的配置"><span class="nav-number">1.2.3.</span> <span class="nav-text">第三步、application.xml的配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#第四步、struts-xml的配置"><span class="nav-number">1.2.4.</span> <span class="nav-text">第四步、struts.xml的配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#第五步、domain层-model层-以及映射文件"><span class="nav-number">1.2.5.</span> <span class="nav-text">第五步、domain层(model层)以及映射文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#第六步、DAO层实现数据库连接以及CRUD操作"><span class="nav-number">1.2.6.</span> <span class="nav-text">第六步、DAO层实现数据库连接以及CRUD操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#第七步、Service层类的实现"><span class="nav-number">1.2.7.</span> <span class="nav-text">第七步、Service层类的实现</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#第八步、Action层-controller-的实现"><span class="nav-number">1.2.8.</span> <span class="nav-text">第八步、Action层(controller)的实现</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#第九步、前端jsp的实现"><span class="nav-number">1.2.9.</span> <span class="nav-text">第九步、前端jsp的实现</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JackeyZz</span>

  
</div>
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
